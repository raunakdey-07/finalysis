{"ast":null,"code":"\"use strict\";\n\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { forwardRef, memo, useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState, useContext } from 'react';\nimport debounce from 'lodash.debounce';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport useColorScheme from \"react-native-web/dist/exports/useColorScheme\";\nimport { moderateScale, ScaledSheet } from 'react-native-size-matters';\nimport { Dropdown } from \"./Dropdown\";\nimport { NothingFound } from \"./NothingFound\";\nimport { RightButton } from \"./RightButton\";\nimport { ScrollViewListItem } from \"./ScrollViewListItem\";\nimport { AutocompleteDropdownContext, AutocompleteDropdownContextProvider } from \"./AutocompleteDropdownContext\";\nimport diacriticless from \"./diacriticless\";\nimport { theme } from \"./theme\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport * from \"./types\";\nexport { AutocompleteDropdownContextProvider };\nexport var AutocompleteDropdown = memo(forwardRef(function (props, ref) {\n  var dataSetProp = props.dataSet,\n    initialValueProp = props.initialValue,\n    _props$clearOnFocus = props.clearOnFocus,\n    clearOnFocus = _props$clearOnFocus === void 0 ? true : _props$clearOnFocus,\n    _props$caseSensitive = props.caseSensitive,\n    caseSensitive = _props$caseSensitive === void 0 ? false : _props$caseSensitive,\n    _props$ignoreAccents = props.ignoreAccents,\n    ignoreAccents = _props$ignoreAccents === void 0 ? true : _props$ignoreAccents,\n    _props$trimSearchText = props.trimSearchText,\n    trimSearchText = _props$trimSearchText === void 0 ? true : _props$trimSearchText,\n    _props$editable = props.editable,\n    editable = _props$editable === void 0 ? true : _props$editable,\n    _props$enableLoadingI = props.enableLoadingIndicator,\n    enableLoadingIndicator = _props$enableLoadingI === void 0 ? true : _props$enableLoadingI,\n    matchFrom = props.matchFrom,\n    _props$inputHeight = props.inputHeight,\n    inputHeight = _props$inputHeight === void 0 ? moderateScale(40, 0.2) : _props$inputHeight,\n    _props$suggestionsLis = props.suggestionsListMaxHeight,\n    suggestionsListMaxHeight = _props$suggestionsLis === void 0 ? moderateScale(200, 0.2) : _props$suggestionsLis,\n    directionProp = props.direction,\n    controller = props.controller,\n    onSelectItemProp = props.onSelectItem,\n    onOpenSuggestionsListProp = props.onOpenSuggestionsList,\n    useFilter = props.useFilter,\n    customRenderItem = props.renderItem,\n    EmptyResultComponent = props.EmptyResultComponent,\n    emptyResultText = props.emptyResultText,\n    onClear = props.onClear,\n    onTextChange = props.onChangeText,\n    _props$debounce = props.debounce,\n    debounceDelay = _props$debounce === void 0 ? 0 : _props$debounce,\n    onChevronPressProp = props.onChevronPress,\n    onFocusProp = props.onFocus,\n    onBlurProp = props.onBlur,\n    onSubmitProp = props.onSubmit,\n    closeOnSubmit = props.closeOnSubmit,\n    loadingProp = props.loading,\n    LeftComponent = props.LeftComponent,\n    textInputProps = props.textInputProps,\n    showChevron = props.showChevron,\n    showClear = props.showClear,\n    rightButtonsContainerStyle = props.rightButtonsContainerStyle,\n    ChevronIconComponent = props.ChevronIconComponent,\n    ClearIconComponent = props.ClearIconComponent,\n    RightIconComponent = props.RightIconComponent,\n    onRightIconComponentPress = props.onRightIconComponentPress,\n    containerStyle = props.containerStyle,\n    inputContainerStyle = props.inputContainerStyle,\n    suggestionsListTextStyle = props.suggestionsListTextStyle;\n  var InputComponent = props.InputComponent || TextInput;\n  var inputRef = useRef(null);\n  var containerRef = useRef(null);\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    searchText = _useState2[0],\n    setSearchText = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    inputValue = _useState4[0],\n    setInputValue = _useState4[1];\n  var _useState5 = useState(loadingProp),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    selectedItem = _useState8[0],\n    setSelectedItem = _useState8[1];\n  var _useState9 = useState(false),\n    _useState0 = _slicedToArray(_useState9, 2),\n    isOpened = _useState0[0],\n    setIsOpened = _useState0[1];\n  var initialDataSetRef = useRef(dataSetProp);\n  var initialValueRef = useRef(initialValueProp);\n  var _useState1 = useState(dataSetProp),\n    _useState10 = _slicedToArray(_useState1, 2),\n    dataSet = _useState10[0],\n    setDataSet = _useState10[1];\n  var matchFromStart = matchFrom === 'start' ? true : false;\n  var _useContext = useContext(AutocompleteDropdownContext),\n    content = _useContext.content,\n    setContent = _useContext.setContent,\n    activeInputContainerRef = _useContext.activeInputContainerRef,\n    activeControllerRef = _useContext.activeControllerRef,\n    _useContext$direction = _useContext.direction,\n    direction = _useContext$direction === void 0 ? directionProp : _useContext$direction,\n    setDirection = _useContext.setDirection,\n    controllerRefs = _useContext.controllerRefs;\n  var themeName = useColorScheme() || 'light';\n  var styles = useMemo(function () {\n    return getStyles(themeName);\n  }, [themeName]);\n  useEffect(function () {\n    setLoading(loadingProp);\n  }, [loadingProp]);\n  var calculateDirection = useCallback(function () {\n    var _ref2 = _asyncToGenerator(function* (_ref) {\n      var waitForKeyboard = _ref.waitForKeyboard;\n      var _yield$Promise = yield new Promise(function (resolve) {\n          var _containerRef$current;\n          return (_containerRef$current = containerRef.current) == null ? void 0 : _containerRef$current.measureInWindow(function () {\n            for (var _len = arguments.length, rect = new Array(_len), _key = 0; _key < _len; _key++) {\n              rect[_key] = arguments[_key];\n            }\n            return resolve(rect);\n          });\n        }),\n        _yield$Promise2 = _slicedToArray(_yield$Promise, 2),\n        positionY = _yield$Promise2[1];\n      return new Promise(function (resolve) {\n        setTimeout(function () {\n          var _Keyboard$metrics;\n          var kbHeight = (Keyboard.metrics == null ? void 0 : (_Keyboard$metrics = Keyboard.metrics()) == null ? void 0 : _Keyboard$metrics.height) || 0;\n          var screenHeight = Dimensions.get('window').height;\n          setDirection((screenHeight - kbHeight) / 2 > positionY ? 'down' : 'up');\n          resolve();\n        }, waitForKeyboard ? Platform.select({\n          ios: 600,\n          android: 250,\n          default: 1\n        }) : 1);\n      });\n    });\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [setDirection]);\n  var onClearPress = useCallback(function () {\n    var _inputRef$current;\n    setSearchText('');\n    setInputValue('');\n    setSelectedItem(null);\n    setIsOpened(false);\n    (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.blur();\n    if (typeof onClear === 'function') {\n      onClear();\n    }\n  }, [onClear]);\n  var close = useCallback(function () {\n    setIsOpened(false);\n    setContent(undefined);\n  }, [setContent]);\n  var blur = useCallback(function () {\n    var _inputRef$current2;\n    (_inputRef$current2 = inputRef.current) == null ? void 0 : _inputRef$current2.blur();\n  }, []);\n  var open = useCallback(_asyncToGenerator(function* () {\n    if (directionProp) {\n      setDirection(directionProp);\n    } else {\n      var _inputRef$current3;\n      yield calculateDirection({\n        waitForKeyboard: !!((_inputRef$current3 = inputRef.current) != null && _inputRef$current3.isFocused())\n      });\n    }\n    setTimeout(function () {\n      setIsOpened(true);\n    }, 0);\n  }), [calculateDirection, directionProp, setDirection]);\n  var toggle = useCallback(function () {\n    isOpened ? close() : open();\n  }, [close, isOpened, open]);\n  var clear = useCallback(function () {\n    onClearPress();\n  }, [onClearPress]);\n  useLayoutEffect(function () {\n    if (ref) {\n      if (typeof ref === 'function') {\n        ref(inputRef.current);\n      } else {\n        ref.current = inputRef.current;\n      }\n    }\n  }, [ref]);\n  useEffect(function () {\n    var initialDataSet = initialDataSetRef.current;\n    var initialValue = initialValueRef.current;\n    var initialValueItem;\n    if (typeof initialValue === 'string') {\n      initialValueItem = initialDataSet == null ? void 0 : initialDataSet.find(function (el) {\n        return el.id === initialValue;\n      });\n    } else if (typeof initialValue === 'object' && initialValue.id) {\n      initialValueItem = initialDataSet == null ? void 0 : initialDataSet.find(function (el) {\n        return el.id === (initialValue == null ? void 0 : initialValue.id);\n      });\n      if (!initialValueItem) {\n        initialValueItem = initialValue;\n      }\n    }\n    if (initialValueItem) {\n      setSelectedItem(initialValueItem);\n    }\n  }, []);\n  useEffect(function () {\n    return function () {\n      setContent(undefined);\n      setIsOpened(false);\n    };\n  }, [setContent]);\n  var setInputText = useCallback(function (text) {\n    setSearchText(text);\n  }, []);\n  var setItem = useCallback(function (item) {\n    setSelectedItem(item);\n  }, []);\n  useEffect(function () {\n    if (activeControllerRef != null && activeControllerRef.current) {\n      controllerRefs == null ? void 0 : controllerRefs.current.push(activeControllerRef == null ? void 0 : activeControllerRef.current);\n    }\n  }, []);\n  var closeAll = useCallback(function () {\n    controllerRefs == null ? void 0 : controllerRefs.current.forEach(function (c) {\n      c == null ? void 0 : c.blur == null ? void 0 : c.blur();\n      c == null ? void 0 : c.close == null ? void 0 : c.close();\n    });\n  }, [controllerRefs]);\n  useEffect(function () {\n    var methods = activeControllerRef ? {\n      close: close,\n      blur: blur,\n      open: open,\n      toggle: toggle,\n      clear: clear,\n      setInputText: setInputText,\n      setItem: setItem\n    } : null;\n    if (activeControllerRef) {\n      activeControllerRef.current = methods;\n    }\n    if (typeof controller === 'function') {\n      controller(methods);\n    } else if (controller) {\n      controller.current = methods;\n    }\n  }, [blur, clear, close, controller, activeControllerRef, open, setInputText, setItem, toggle]);\n  useEffect(function () {\n    if (selectedItem) {\n      var _selectedItem$title;\n      setInputValue((_selectedItem$title = selectedItem.title) != null ? _selectedItem$title : '');\n    } else {\n      setInputValue('');\n    }\n  }, [selectedItem]);\n  useEffect(function () {\n    setInputValue(searchText);\n  }, [searchText]);\n  useEffect(function () {\n    if (typeof onSelectItemProp === 'function') {\n      onSelectItemProp(selectedItem);\n    }\n  }, [selectedItem]);\n  useEffect(function () {\n    if (typeof onOpenSuggestionsListProp === 'function') {\n      onOpenSuggestionsListProp(isOpened);\n    }\n  }, [isOpened]);\n  useEffect(function () {\n    var _inputRef$current4;\n    if (!isOpened && selectedItem && !loading && !((_inputRef$current4 = inputRef.current) != null && _inputRef$current4.isFocused())) {\n      setInputValue(selectedItem.title || '');\n    }\n  }, [isOpened, loading, searchText, selectedItem]);\n  var _onSelectItem = useCallback(function (item) {\n    var _inputRef$current5;\n    setSelectedItem(item);\n    (_inputRef$current5 = inputRef.current) == null ? void 0 : _inputRef$current5.blur();\n    setIsOpened(false);\n  }, []);\n  useEffect(function () {\n    initialDataSetRef.current = dataSetProp;\n    setDataSet(dataSetProp);\n  }, [dataSetProp]);\n  useEffect(function () {\n    var initialDataSet = initialDataSetRef.current;\n    if (!(searchText != null && searchText.length)) {\n      setDataSet(initialDataSet);\n      return;\n    }\n    if (!Array.isArray(initialDataSet) || useFilter === false) {\n      return;\n    }\n    var findWhat = caseSensitive ? searchText : searchText.toLowerCase();\n    if (ignoreAccents) {\n      findWhat = diacriticless(findWhat);\n    }\n    if (trimSearchText) {\n      findWhat = findWhat.trim();\n    }\n    var newSet = initialDataSet.filter(function (item) {\n      var titleStr = item.title || '';\n      var title = caseSensitive ? titleStr : titleStr.toLowerCase();\n      var findWhere = ignoreAccents ? diacriticless(title) : title;\n      if (matchFromStart) {\n        return typeof item.title === 'string' && findWhere.startsWith(findWhat);\n      } else {\n        return typeof item.title === 'string' && findWhere.indexOf(findWhat) !== -1;\n      }\n    });\n    setDataSet(newSet);\n  }, [ignoreAccents, matchFromStart, caseSensitive, searchText, trimSearchText, useFilter]);\n  var renderItem = useCallback(function (_ref4) {\n    var item = _ref4.item;\n    if (typeof customRenderItem === 'function') {\n      var EL = customRenderItem(item, searchText);\n      return _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return _onSelectItem(item);\n        },\n        children: EL\n      });\n    }\n    return _jsx(ScrollViewListItem, {\n      title: item.title || '',\n      highlight: searchText,\n      style: suggestionsListTextStyle,\n      onPress: function onPress() {\n        return _onSelectItem(item);\n      },\n      ignoreAccents: ignoreAccents\n    }, item.id);\n  }, [_onSelectItem, customRenderItem, ignoreAccents, searchText, suggestionsListTextStyle]);\n  var ListEmptyComponent = useMemo(function () {\n    return EmptyResultComponent != null ? EmptyResultComponent : _jsx(NothingFound, {\n      emptyResultText: emptyResultText\n    });\n  }, [EmptyResultComponent, emptyResultText]);\n  var debouncedEvent = useMemo(function () {\n    return debounce(function (text) {\n      if (typeof onTextChange === 'function') {\n        onTextChange(text);\n      }\n      setLoading(false);\n    }, debounceDelay);\n  }, [debounceDelay, onTextChange]);\n  var onChangeText = useCallback(function (text) {\n    setSearchText(text);\n    setInputValue(text);\n    setLoading(true);\n    debouncedEvent(text);\n  }, [debouncedEvent]);\n  var onChevronPress = useCallback(function () {\n    toggle();\n    Keyboard.dismiss();\n    if (typeof onChevronPressProp === 'function') {\n      onChevronPressProp();\n    }\n  }, [onChevronPressProp, toggle]);\n  var onFocus = useCallback(function (e) {\n    if (clearOnFocus) {\n      setSearchText('');\n      setInputValue('');\n    }\n    if (typeof onFocusProp === 'function') {\n      onFocusProp(e);\n    }\n    open();\n  }, [clearOnFocus, onFocusProp, open]);\n  var onBlur = useCallback(function (e) {\n    if (typeof onBlurProp === 'function') {\n      onBlurProp(e);\n    }\n  }, [onBlurProp]);\n  var onSubmit = useCallback(function (e) {\n    var _inputRef$current6;\n    (_inputRef$current6 = inputRef.current) == null ? void 0 : _inputRef$current6.blur();\n    if (closeOnSubmit) {\n      close();\n    }\n    if (typeof onSubmitProp === 'function') {\n      onSubmitProp(e);\n    }\n  }, [close, closeOnSubmit, onSubmitProp]);\n  var onPressOut = useCallback(function (e) {\n    closeAll();\n    if (editable) {\n      var _inputRef$current7;\n      inputRef == null ? void 0 : (_inputRef$current7 = inputRef.current) == null ? void 0 : _inputRef$current7.focus();\n    } else {\n      toggle();\n    }\n  }, [closeAll, editable, toggle]);\n  useEffect(function () {\n    var _inputRef$current8;\n    if (!content && !((_inputRef$current8 = inputRef.current) != null && _inputRef$current8.isFocused()) || loading) {\n      var db = debounce(function () {\n        setIsOpened(false);\n      }, 100);\n      db();\n      return function () {\n        db.cancel();\n      };\n    }\n  }, [content, loading]);\n  useEffect(function () {\n    var _inputRef$current9;\n    if (searchText && (_inputRef$current9 = inputRef.current) != null && _inputRef$current9.isFocused() && !loading) {\n      setIsOpened(true);\n    }\n  }, [loading, searchText]);\n  useEffect(function () {\n    if (isOpened && Array.isArray(dataSet)) {\n      if (activeInputContainerRef) {\n        activeInputContainerRef.current = containerRef.current;\n      }\n      setContent(_jsx(Dropdown, _objectSpread(_objectSpread({}, props), {}, {\n        direction: direction,\n        inputHeight: inputHeight,\n        dataSet: dataSet,\n        suggestionsListMaxHeight: suggestionsListMaxHeight,\n        renderItem: renderItem,\n        ListEmptyComponent: ListEmptyComponent\n      })));\n    } else {\n      setContent(undefined);\n    }\n  }, [ListEmptyComponent, activeInputContainerRef, dataSet, direction, inputHeight, isOpened, props, renderItem, setContent, suggestionsListMaxHeight]);\n  return _jsx(View, {\n    onStartShouldSetResponder: function onStartShouldSetResponder() {\n      return true;\n    },\n    onTouchEnd: function onTouchEnd(e) {\n      e.stopPropagation();\n    },\n    style: [styles.container, containerStyle],\n    children: _jsxs(View, {\n      ref: containerRef,\n      onLayout: function onLayout(_) {},\n      style: [styles.inputContainerStyle, inputContainerStyle],\n      children: [LeftComponent, _jsx(Pressable, {\n        style: styles.pressable,\n        pointerEvents: Platform.select({\n          ios: 'box-only',\n          default: 'auto'\n        }),\n        onPressOut: onPressOut,\n        children: _jsx(InputComponent, _objectSpread(_objectSpread({\n          ref: inputRef,\n          value: inputValue,\n          onChangeText: onChangeText,\n          autoCorrect: false,\n          editable: editable,\n          onBlur: onBlur,\n          onFocus: onFocus,\n          onSubmitEditing: onSubmit,\n          placeholderTextColor: theme[themeName].inputPlaceholderColor\n        }, textInputProps), {}, {\n          style: [styles.input, {\n            height: inputHeight\n          }, (textInputProps != null ? textInputProps : {}).style]\n        }))\n      }), _jsx(RightButton, {\n        isOpened: isOpened,\n        inputHeight: inputHeight,\n        onClearPress: onClearPress,\n        onChevronPress: onChevronPress,\n        showChevron: showChevron != null ? showChevron : true,\n        showClear: showClear != null ? showClear : !!searchText || !!selectedItem,\n        enableLoadingIndicator: enableLoadingIndicator,\n        loading: loading,\n        buttonsContainerStyle: rightButtonsContainerStyle,\n        ChevronIconComponent: ChevronIconComponent,\n        ClearIconComponent: ClearIconComponent,\n        RightIconComponent: RightIconComponent,\n        onRightIconComponentPress: onRightIconComponentPress\n      })]\n    })\n  });\n}));\nvar getStyles = function getStyles() {\n  var themeName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'light';\n  return ScaledSheet.create({\n    container: {\n      marginVertical: 2\n    },\n    inputContainerStyle: {\n      display: 'flex',\n      flexDirection: 'row',\n      backgroundColor: theme[themeName].inputBackgroundColor,\n      borderRadius: 5,\n      overflow: 'hidden'\n    },\n    input: {\n      flexGrow: 1,\n      flexShrink: 1,\n      overflow: 'hidden',\n      paddingHorizontal: 13,\n      fontSize: 16,\n      color: theme[themeName].inputTextColor\n    },\n    pressable: {\n      flexGrow: 1,\n      flexShrink: 1\n    }\n  });\n};","map":{"version":3,"names":["React","forwardRef","memo","useCallback","useEffect","useLayoutEffect","useMemo","useRef","useState","useContext","debounce","Dimensions","Keyboard","Platform","Pressable","TextInput","TouchableOpacity","View","useColorScheme","moderateScale","ScaledSheet","Dropdown","NothingFound","RightButton","ScrollViewListItem","AutocompleteDropdownContext","AutocompleteDropdownContextProvider","diacriticless","theme","jsx","_jsx","jsxs","_jsxs","AutocompleteDropdown","props","ref","dataSetProp","dataSet","initialValueProp","initialValue","_props$clearOnFocus","clearOnFocus","_props$caseSensitive","caseSensitive","_props$ignoreAccents","ignoreAccents","_props$trimSearchText","trimSearchText","_props$editable","editable","_props$enableLoadingI","enableLoadingIndicator","matchFrom","_props$inputHeight","inputHeight","_props$suggestionsLis","suggestionsListMaxHeight","directionProp","direction","controller","onSelectItemProp","onSelectItem","onOpenSuggestionsListProp","onOpenSuggestionsList","useFilter","customRenderItem","renderItem","EmptyResultComponent","emptyResultText","onClear","onTextChange","onChangeText","_props$debounce","debounceDelay","onChevronPressProp","onChevronPress","onFocusProp","onFocus","onBlurProp","onBlur","onSubmitProp","onSubmit","closeOnSubmit","loadingProp","loading","LeftComponent","textInputProps","showChevron","showClear","rightButtonsContainerStyle","ChevronIconComponent","ClearIconComponent","RightIconComponent","onRightIconComponentPress","containerStyle","inputContainerStyle","suggestionsListTextStyle","InputComponent","inputRef","containerRef","_useState","_useState2","_slicedToArray","searchText","setSearchText","_useState3","_useState4","inputValue","setInputValue","_useState5","_useState6","setLoading","_useState7","_useState8","selectedItem","setSelectedItem","_useState9","_useState0","isOpened","setIsOpened","initialDataSetRef","initialValueRef","_useState1","_useState10","setDataSet","matchFromStart","_useContext","content","setContent","activeInputContainerRef","activeControllerRef","_useContext$direction","setDirection","controllerRefs","themeName","styles","getStyles","calculateDirection","_ref2","_asyncToGenerator","_ref","waitForKeyboard","_yield$Promise","Promise","resolve","_containerRef$current","current","measureInWindow","_len","arguments","length","rect","Array","_key","_yield$Promise2","positionY","setTimeout","_Keyboard$metrics","kbHeight","metrics","height","screenHeight","get","select","ios","android","default","_x","apply","onClearPress","_inputRef$current","blur","close","undefined","_inputRef$current2","open","_inputRef$current3","isFocused","toggle","clear","initialDataSet","initialValueItem","find","el","id","setInputText","text","setItem","item","push","closeAll","forEach","c","methods","_selectedItem$title","title","_inputRef$current4","_onSelectItem","_inputRef$current5","isArray","findWhat","toLowerCase","trim","newSet","filter","titleStr","findWhere","startsWith","indexOf","_ref4","EL","onPress","children","highlight","style","ListEmptyComponent","debouncedEvent","dismiss","e","_inputRef$current6","onPressOut","_inputRef$current7","focus","_inputRef$current8","db","cancel","_inputRef$current9","_objectSpread","onStartShouldSetResponder","onTouchEnd","stopPropagation","container","onLayout","_","pressable","pointerEvents","value","autoCorrect","onSubmitEditing","placeholderTextColor","inputPlaceholderColor","input","buttonsContainerStyle","create","marginVertical","display","flexDirection","backgroundColor","inputBackgroundColor","borderRadius","overflow","flexGrow","flexShrink","paddingHorizontal","fontSize","color","inputTextColor"],"sources":["C:\\Users\\rauna\\Project Finalysis\\node_modules\\react-native-autocomplete-dropdown\\src\\index.tsx"],"sourcesContent":["import React, {\n  forwardRef,\n  memo,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n  useContext,\n} from 'react'\nimport debounce from 'lodash.debounce'\nimport type {\n  GestureResponderEvent,\n  ListRenderItem,\n  NativeSyntheticEvent,\n  TextInputFocusEventData,\n  TextInputSubmitEditingEventData,\n} from 'react-native'\nimport {\n  Dimensions,\n  Keyboard,\n  Platform,\n  Pressable,\n  TextInput,\n  TouchableOpacity,\n  View,\n  useColorScheme,\n} from 'react-native'\nimport { moderateScale, ScaledSheet } from 'react-native-size-matters'\nimport { Dropdown } from './Dropdown'\nimport { NothingFound } from './NothingFound'\nimport { RightButton } from './RightButton'\nimport { ScrollViewListItem } from './ScrollViewListItem'\nimport { AutocompleteDropdownContext, AutocompleteDropdownContextProvider } from './AutocompleteDropdownContext'\nimport diacriticless from './diacriticless'\nimport { theme } from './theme'\nimport type { IAutocompleteDropdownProps, AutocompleteDropdownItem } from './types'\n\nexport * from './types'\nexport { AutocompleteDropdownContextProvider }\n\nexport const AutocompleteDropdown = memo<\n  React.ForwardRefExoticComponent<Omit<IAutocompleteDropdownProps, 'ref'> & React.RefAttributes<unknown>>\n>(\n  forwardRef((props: IAutocompleteDropdownProps, ref) => {\n    const {\n      dataSet: dataSetProp,\n      initialValue: initialValueProp,\n      clearOnFocus = true,\n      caseSensitive = false,\n      ignoreAccents = true,\n      trimSearchText = true,\n      editable = true,\n      enableLoadingIndicator = true,\n      matchFrom,\n      inputHeight = moderateScale(40, 0.2),\n      suggestionsListMaxHeight = moderateScale(200, 0.2),\n      // bottomOffset = 0,\n      direction: directionProp,\n      controller,\n      onSelectItem: onSelectItemProp,\n      onOpenSuggestionsList: onOpenSuggestionsListProp,\n      useFilter,\n      renderItem: customRenderItem,\n      EmptyResultComponent,\n      emptyResultText,\n      onClear,\n      onChangeText: onTextChange,\n      debounce: debounceDelay = 0,\n      onChevronPress: onChevronPressProp,\n      onFocus: onFocusProp,\n      onBlur: onBlurProp,\n      onSubmit: onSubmitProp,\n      closeOnSubmit,\n      loading: loadingProp,\n      LeftComponent,\n      textInputProps,\n      showChevron,\n      showClear,\n      rightButtonsContainerStyle,\n      ChevronIconComponent,\n      ClearIconComponent,\n      RightIconComponent,\n      onRightIconComponentPress,\n      containerStyle,\n      inputContainerStyle,\n      suggestionsListTextStyle,\n    } = props\n    const InputComponent = (props.InputComponent as typeof TextInput) || TextInput\n    const inputRef = useRef<TextInput>(null)\n    const containerRef = useRef<View>(null)\n    const [searchText, setSearchText] = useState('')\n    const [inputValue, setInputValue] = useState('')\n    const [loading, setLoading] = useState(loadingProp)\n    const [selectedItem, setSelectedItem] = useState<AutocompleteDropdownItem | null>(null)\n    const [isOpened, setIsOpened] = useState(false)\n    const initialDataSetRef = useRef<AutocompleteDropdownItem[] | null>(dataSetProp)\n    const initialValueRef = useRef(initialValueProp)\n    const [dataSet, setDataSet] = useState(dataSetProp)\n    const matchFromStart = matchFrom === 'start' ? true : false\n    const {\n      content,\n      setContent,\n      activeInputContainerRef,\n      activeControllerRef,\n      direction = directionProp,\n      setDirection,\n      controllerRefs,\n    } = useContext(AutocompleteDropdownContext)\n    const themeName = useColorScheme() || 'light'\n    const styles = useMemo(() => getStyles(themeName), [themeName])\n\n    useEffect(() => {\n      setLoading(loadingProp)\n    }, [loadingProp])\n\n    const calculateDirection = useCallback(\n      async ({ waitForKeyboard }: { waitForKeyboard: boolean }) => {\n        const [, positionY] = await new Promise<[x: number, y: number, width: number, height: number]>(resolve =>\n          containerRef.current?.measureInWindow((...rect) => resolve(rect)),\n        )\n\n        return new Promise<void>(resolve => {\n          setTimeout(\n            () => {\n              const kbHeight = Keyboard.metrics?.()?.height || 0\n              const screenHeight = Dimensions.get('window').height\n              setDirection((screenHeight - kbHeight) / 2 > positionY ? 'down' : 'up')\n              resolve()\n            },\n            waitForKeyboard ? Platform.select({ ios: 600, android: 250, default: 1 }) : 1, // wait for keyboard to show\n          )\n        })\n      },\n      [setDirection],\n    )\n\n    const onClearPress = useCallback(() => {\n      setSearchText('')\n      setInputValue('')\n      setSelectedItem(null)\n      setIsOpened(false)\n      inputRef.current?.blur()\n      if (typeof onClear === 'function') {\n        onClear()\n      }\n    }, [onClear])\n\n    /** methods */\n    const close = useCallback(() => {\n      setIsOpened(false)\n      setContent(undefined)\n    }, [setContent])\n\n    const blur = useCallback(() => {\n      inputRef.current?.blur()\n    }, [])\n\n    const open = useCallback(async () => {\n      if (directionProp) {\n        setDirection(directionProp)\n      } else {\n        await calculateDirection({ waitForKeyboard: !!inputRef.current?.isFocused() })\n      }\n\n      setTimeout(() => {\n        setIsOpened(true)\n      }, 0)\n    }, [calculateDirection, directionProp, setDirection])\n\n    const toggle = useCallback(() => {\n      isOpened ? close() : open()\n    }, [close, isOpened, open])\n\n    const clear = useCallback(() => {\n      onClearPress()\n    }, [onClearPress])\n\n    useLayoutEffect(() => {\n      if (ref) {\n        if (typeof ref === 'function') {\n          ref(inputRef.current)\n        } else {\n          ref.current = inputRef.current\n        }\n      }\n    }, [ref])\n\n    /** Set initial value */\n    useEffect(() => {\n      const initialDataSet = initialDataSetRef.current\n      const initialValue = initialValueRef.current\n\n      let initialValueItem: AutocompleteDropdownItem | undefined\n      if (typeof initialValue === 'string') {\n        initialValueItem = initialDataSet?.find(el => el.id === initialValue)\n      } else if (typeof initialValue === 'object' && initialValue.id) {\n        initialValueItem = initialDataSet?.find(el => el.id === initialValue?.id)\n        if (!initialValueItem) {\n          // set the item as it is if it's not in the list\n          initialValueItem = initialValue\n        }\n      }\n\n      if (initialValueItem) {\n        setSelectedItem(initialValueItem)\n      }\n    }, [])\n\n    useEffect(() => {\n      return () => {\n        setContent(undefined)\n        setIsOpened(false)\n      }\n    }, [setContent])\n\n    const setInputText = useCallback((text: string) => {\n      setSearchText(text)\n    }, [])\n\n    const setItem = useCallback((item: AutocompleteDropdownItem | null) => {\n      setSelectedItem(item)\n    }, [])\n\n    useEffect(() => {\n      if (activeControllerRef?.current) {\n        controllerRefs?.current.push(activeControllerRef?.current)\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    const closeAll = useCallback(() => {\n      controllerRefs?.current.forEach(c => {\n        c?.blur?.()\n        c?.close?.()\n      })\n    }, [controllerRefs])\n\n    /** expose controller methods */\n    useEffect(() => {\n      const methods = activeControllerRef ? { close, blur, open, toggle, clear, setInputText, setItem } : null\n      if (activeControllerRef) {\n        activeControllerRef.current = methods\n      }\n      if (typeof controller === 'function') {\n        controller(methods)\n      } else if (controller) {\n        controller.current = methods\n      }\n    }, [blur, clear, close, controller, activeControllerRef, open, setInputText, setItem, toggle])\n\n    useEffect(() => {\n      if (selectedItem) {\n        setInputValue(selectedItem.title ?? '')\n      } else {\n        setInputValue('')\n      }\n    }, [selectedItem])\n\n    useEffect(() => {\n      setInputValue(searchText)\n    }, [searchText])\n\n    useEffect(() => {\n      if (typeof onSelectItemProp === 'function') {\n        onSelectItemProp(selectedItem)\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [selectedItem])\n\n    useEffect(() => {\n      if (typeof onOpenSuggestionsListProp === 'function') {\n        onOpenSuggestionsListProp(isOpened)\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isOpened])\n\n    useEffect(() => {\n      // renew state on close\n      if (!isOpened && selectedItem && !loading && !inputRef.current?.isFocused()) {\n        setInputValue(selectedItem.title || '')\n      }\n    }, [isOpened, loading, searchText, selectedItem])\n\n    const _onSelectItem = useCallback((item: AutocompleteDropdownItem) => {\n      setSelectedItem(item)\n      inputRef.current?.blur()\n      setIsOpened(false)\n    }, [])\n\n    useEffect(() => {\n      initialDataSetRef.current = dataSetProp\n      setDataSet(dataSetProp)\n    }, [dataSetProp])\n\n    useEffect(() => {\n      const initialDataSet = initialDataSetRef.current\n      if (!searchText?.length) {\n        setDataSet(initialDataSet)\n        return\n      }\n\n      if (!Array.isArray(initialDataSet) || useFilter === false) {\n        return\n      }\n\n      let findWhat = caseSensitive ? searchText : searchText.toLowerCase()\n\n      if (ignoreAccents) {\n        findWhat = diacriticless(findWhat)\n      }\n\n      if (trimSearchText) {\n        findWhat = findWhat.trim()\n      }\n\n      const newSet = initialDataSet.filter((item: AutocompleteDropdownItem) => {\n        const titleStr = item.title || ''\n        const title = caseSensitive ? titleStr : titleStr.toLowerCase()\n        const findWhere = ignoreAccents ? diacriticless(title) : title\n\n        if (matchFromStart) {\n          return typeof item.title === 'string' && findWhere.startsWith(findWhat)\n        } else {\n          return typeof item.title === 'string' && findWhere.indexOf(findWhat) !== -1\n        }\n      })\n\n      setDataSet(newSet)\n    }, [ignoreAccents, matchFromStart, caseSensitive, searchText, trimSearchText, useFilter])\n\n    const renderItem: ListRenderItem<AutocompleteDropdownItem> = useCallback(\n      ({ item }) => {\n        if (typeof customRenderItem === 'function') {\n          const EL = customRenderItem(item, searchText)\n          return <TouchableOpacity onPress={() => _onSelectItem(item)}>{EL}</TouchableOpacity>\n        }\n\n        return (\n          <ScrollViewListItem\n            key={item.id}\n            title={item.title || ''}\n            highlight={searchText}\n            style={suggestionsListTextStyle}\n            onPress={() => _onSelectItem(item)}\n            ignoreAccents={ignoreAccents}\n          />\n        )\n      },\n      [_onSelectItem, customRenderItem, ignoreAccents, searchText, suggestionsListTextStyle],\n    )\n\n    const ListEmptyComponent = useMemo(() => {\n      return EmptyResultComponent ?? <NothingFound emptyResultText={emptyResultText} />\n    }, [EmptyResultComponent, emptyResultText])\n\n    const debouncedEvent = useMemo(\n      () =>\n        debounce((text: string) => {\n          if (typeof onTextChange === 'function') {\n            onTextChange(text)\n          }\n          setLoading(false)\n        }, debounceDelay),\n      [debounceDelay, onTextChange],\n    )\n\n    const onChangeText = useCallback(\n      (text: string) => {\n        setSearchText(text)\n        setInputValue(text)\n        setLoading(true)\n        debouncedEvent(text)\n      },\n      [debouncedEvent],\n    )\n\n    const onChevronPress = useCallback(() => {\n      toggle()\n      Keyboard.dismiss()\n\n      if (typeof onChevronPressProp === 'function') {\n        onChevronPressProp()\n      }\n    }, [onChevronPressProp, toggle])\n\n    const onFocus = useCallback(\n      (e: NativeSyntheticEvent<TextInputFocusEventData>) => {\n        if (clearOnFocus) {\n          setSearchText('')\n          setInputValue('')\n        }\n        if (typeof onFocusProp === 'function') {\n          onFocusProp(e)\n        }\n        open()\n      },\n      [clearOnFocus, onFocusProp, open],\n    )\n\n    const onBlur = useCallback(\n      (e: NativeSyntheticEvent<TextInputFocusEventData>) => {\n        if (typeof onBlurProp === 'function') {\n          onBlurProp(e)\n        }\n      },\n      [onBlurProp],\n    )\n\n    const onSubmit = useCallback(\n      (e: NativeSyntheticEvent<TextInputSubmitEditingEventData>) => {\n        inputRef.current?.blur()\n        if (closeOnSubmit) {\n          close()\n        }\n\n        if (typeof onSubmitProp === 'function') {\n          onSubmitProp(e)\n        }\n      },\n      [close, closeOnSubmit, onSubmitProp],\n    )\n\n    const onPressOut = useCallback(\n      (e: GestureResponderEvent) => {\n        closeAll()\n        if (editable) {\n          inputRef?.current?.focus()\n        } else {\n          toggle()\n        }\n      },\n      [closeAll, editable, toggle],\n    )\n\n    useEffect(() => {\n      if ((!content && !inputRef.current?.isFocused()) || loading) {\n        const db = debounce(() => {\n          setIsOpened(false)\n        }, 100)\n        db()\n        return () => {\n          db.cancel()\n        }\n      }\n    }, [content, loading])\n\n    useEffect(() => {\n      // searchTextRef\n      if (searchText && inputRef.current?.isFocused() && !loading) {\n        setIsOpened(true)\n      }\n    }, [loading, searchText])\n\n    useEffect(() => {\n      if (isOpened && Array.isArray(dataSet)) {\n        if (activeInputContainerRef) {\n          activeInputContainerRef.current = containerRef.current\n        }\n\n        setContent(\n          <Dropdown\n            {...{\n              ...props,\n              direction,\n              inputHeight,\n              dataSet,\n              suggestionsListMaxHeight,\n              renderItem,\n              ListEmptyComponent,\n            }}\n          />,\n        )\n      } else {\n        setContent(undefined)\n      }\n    }, [\n      ListEmptyComponent,\n      activeInputContainerRef,\n      dataSet,\n      direction,\n      inputHeight,\n      isOpened,\n      props,\n      renderItem,\n      setContent,\n      suggestionsListMaxHeight,\n    ])\n\n    return (\n      <View\n        onStartShouldSetResponder={() => true}\n        onTouchEnd={e => {\n          e.stopPropagation()\n        }}\n        style={[styles.container, containerStyle]}>\n        <View\n          ref={containerRef}\n          onLayout={_ => {}} // it's necessary use onLayout here for Androd (bug?)\n          style={[styles.inputContainerStyle, inputContainerStyle]}>\n          {LeftComponent}\n          <Pressable\n            style={styles.pressable}\n            pointerEvents={Platform.select({ ios: 'box-only', default: 'auto' })}\n            onPressOut={onPressOut}>\n            <InputComponent\n              ref={inputRef}\n              value={inputValue}\n              onChangeText={onChangeText}\n              autoCorrect={false}\n              editable={editable}\n              onBlur={onBlur}\n              onFocus={onFocus}\n              onSubmitEditing={onSubmit}\n              placeholderTextColor={theme[themeName].inputPlaceholderColor}\n              {...textInputProps}\n              style={[styles.input, { height: inputHeight }, (textInputProps ?? {}).style]}\n            />\n          </Pressable>\n          <RightButton\n            isOpened={isOpened}\n            inputHeight={inputHeight}\n            onClearPress={onClearPress}\n            onChevronPress={onChevronPress}\n            showChevron={showChevron ?? true}\n            showClear={showClear ?? (!!searchText || !!selectedItem)}\n            enableLoadingIndicator={enableLoadingIndicator}\n            loading={loading}\n            buttonsContainerStyle={rightButtonsContainerStyle}\n            ChevronIconComponent={ChevronIconComponent}\n            ClearIconComponent={ClearIconComponent}\n            RightIconComponent={RightIconComponent}\n            onRightIconComponentPress={onRightIconComponentPress}\n          />\n        </View>\n      </View>\n    )\n  }),\n)\n\nconst getStyles = (themeName: 'light' | 'dark' = 'light') =>\n  ScaledSheet.create({\n    container: {\n      marginVertical: 2,\n    },\n    inputContainerStyle: {\n      display: 'flex',\n      flexDirection: 'row',\n      backgroundColor: theme[themeName].inputBackgroundColor,\n      borderRadius: 5,\n      overflow: 'hidden',\n    },\n    input: {\n      flexGrow: 1,\n      flexShrink: 1,\n      overflow: 'hidden',\n      paddingHorizontal: 13,\n      fontSize: 16,\n      color: theme[themeName].inputTextColor,\n    },\n    pressable: {\n      flexGrow: 1,\n      flexShrink: 1,\n    },\n  })\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}